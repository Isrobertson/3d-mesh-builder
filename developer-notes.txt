To Do:

	- output doesnt work if there is no output file
	- clean up code to be more readable and manageable